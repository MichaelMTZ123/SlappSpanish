
/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/
import React, { useState, useEffect, createContext, useContext, ReactNode, FC } from 'react';

const translations = {
    en: {
        // General
        'appName': 'Sloth',
        'welcomeTo': 'Welcome to',
        'tagline': 'The slow and steady way to learn.',
        'or': 'OR',
        'signInWithGoogle': 'Sign in with Google',
        'alreadyHaveAccount': 'Already have an account?',
        'dontHaveAccount': "Don't have an account?",
        'signIn': 'Sign In',
        'signUp': 'Sign Up',
        'email': 'Email',
        'password': 'Password',
        'welcomeBack': 'Welcome back!',
        'accountCreated': 'Account created successfully! Welcome to Sloth.',
        'googleSignInSuccess': 'Signed in with Google successfully!',
        'profileUpdated': 'Profile updated successfully!',
        'error': 'Error',
        'loading': 'Loading...',
        'send': 'Send',
        'saveChanges': 'Save Changes',
        'signOut': 'Sign Out',
        'deleteAccount': 'Delete Account',
        'confirmDelete': 'Are you sure you want to delete your account? This action is irreversible.',
        'cancel': 'Cancel',
        'confirm': 'Confirm',
        'accountDeleted': 'Your account has been successfully deleted.',
        'allCorrect': 'Excellent! All answers are correct.',
        'tryAgain': 'Try Again',
        'results': 'Results',
        'notQuite': 'Not quite! Review your answers and try again.',
        'setupProfile': 'Setup Profile',
        'selectLanguage': 'Select Interface Language',
        'selectTheme': 'Select App Theme',
        'lightMode': 'Light Mode',
        'darkMode': 'Dark Mode',
        'next': 'Next',
        'continue': 'Continue',
        'back': 'Back',

        // Home
        'goodMorning': 'Good morning',
        'goodAfternoon': 'Good afternoon',
        'goodEvening': 'Good evening',
        'readyToLearn': 'Ready to learn some Spanish today?',
        'continueLearning': 'Continue Learning',
        'nextStep': 'Your next step is to master',
        'startLesson': 'Start Lesson',
        'dailyStreak': 'Daily Streak',
        'daysInARow': 'days in a row! Keep it up!',
        'points': 'Points',
        'pointsEarned': 'points earned so far.',
        'chatWithSlappy': 'Chat with Slothy!',
        'slappyEncouragement': 'Our friendly AI mascot is here to help you practice.',
        'myFriends': 'My Friends',
        'connectAndChat': 'Connect and chat with friends.',
        'communityHub': 'Community Hub',
        'createAndPlayQuizzes': 'Create and play community quizzes.',
        'dailyQuests': 'Daily Quests',
        'questCompleted': 'Quest Completed',
        'welcomePresentation': 'Welcome to Sloth',
        'allLessonsComplete': 'All lessons complete!',
        'legendMessage': 'You are a legend. Check back later for more content.',
        'quickAccess': 'Quick Access',

        // Navigation
        'home': 'Home',
        'lessons': 'Learn',
        'aiPractice': 'AI Practice',
        'leaderboard': 'Leaderboard',
        'profile': 'Profile',
        'minigames': 'Minigames',
        'friends': 'Friends',
        'community': 'Community',
        'shop': 'Shop',
        'welcomeUser': 'Welcome,',
        'teachingRequests': 'Teaching Requests',

        // Lessons & Learning Hub
        'spanishLessons': 'Spanish Lessons',
        'backToLessons': 'Back to Learning',
        'vocabulary': 'Vocabulary',
        'quiz': 'Quiz',
        'submitQuiz': 'Submit Quiz',
        'quizCompleted': 'Quiz completed! You can go back or try another lesson.',
        'youEarnedPoints': 'You earned',
        'onlineLearning': 'Live Tutors',
        'selfPacedLessons': 'Your Path',
        'learnFromPeers': 'Connect with a live teacher for a 1-on-1 video session.',
        'browseLessons': 'Follow the path to fluency.',
        'findATeacher': 'Find a Teacher',
        'availableTeachers': 'Available Teachers',
        'noTeachersAvailable': 'No teachers are available right now. Check back later!',
        'startCall': 'Start Call',
        'endCall': 'End Call',
        'incomingCallFrom': 'Incoming call from',
        'waitingForTeacher': 'Connecting... Waiting for teacher to join.',
        'callEnded': 'Call Ended',
        'mute': 'Mute',
        'unmute': 'Unmute',
        'videoOn': 'Video On',
        'videoOff': 'Video Off',
        'teachingRequestsDescription': 'Here is a list of learners currently waiting to connect with you.',
        'noTeachingRequests': 'No one is calling right now. Great job keeping up!',
        'acceptCall': 'Accept Call',
        'refresh': 'Refresh',
        'learning': 'Learning',
        'hub': 'Hub',
        'choosePath': 'Choose your path to fluency.',
        'backToHub': 'Back to Learning Hub',
        'online': 'Online',
        'unit': 'Unit',
        'outOfLives': 'Out of Lives!',
        'dontWorry': "Don't worry, practice makes perfect. Try again.",


        // AI Chat
        'aiPracticeChat': 'AI Practice Chat',
        'typeYourMessage': 'Type your message...',
        'aiInitialMessage': '¡Hola! I am Slothy. Ask me anything in Spanish or English.',
        'oopsError': 'Oops! Something went wrong. Please try again.',
        'slappyIsThinking': 'Slothy is thinking...',
        'mascotDefault': 'Just remember, slow and steady wins the race!',
        'gotIt': 'Got it!',
        'clearChat': 'Clear Chat',
        'confirmClearChat': 'Are you sure you want to clear the entire chat history? This cannot be undone.',
        'chatCleared': 'Chat history cleared.',
        'scenarios': 'Scenarios',
        'pickScenario': 'Pick a Roleplay Scenario',
        'listening': 'Listening...',
        'speaking': 'Speaking...',
        'thinking': 'Thinking...',
        'autoVoiceActive': 'Auto-Voice Mode Active',

        // Leaderboard
        'anonymousUser': 'Anonymous User',

        // Profile
        'myProfile': 'My Profile',
        'displayName': 'Display Name',
        'yourRank': 'Your Rank',
        'changeLanguage': 'App Language',
        'setYourRole': 'Set Your Role',
        'teacher': 'Teacher',
        'learner': 'Learner',
        'availability': 'Availability',
        'availableForCalls': 'Available for calls',

        // Ranks
        'novato': 'Novato',
        'aprendiz': 'Aprendiz',
        'maestro': 'Maestro',
        'leyenda': 'Leyenda',
        
        // Shop
        'slothShop': 'Sloth Shop',
        'spendCoins': 'Spend your hard-earned coins!',
        'buy': 'Buy',
        'equipped': 'Equipped',
        'equip': 'Equip',
        'owned': 'Owned',
        'coins': 'Coins',

        // Friends
        'findFriends': 'Find Friends',
        'searchUsers': 'Search for users...',
        'friendRequests': 'Friend Requests',
        'noPendingRequests': 'No pending requests.',
        'myFriendsList': 'My Friends',
        'noFriendsYet': 'You have no friends yet. Add some!',
        'chatWith': 'Chat with',
        'voiceMessage': 'Voice Message',
        'startTyping': 'Start typing to chat...',
        'addFriend': 'Add Friend',
        'requestSent': 'Request Sent',
        'requestReceived': 'Request Received',
        'alreadyFriends': 'Already Friends',
        'accept': 'Accept',
        'decline': 'Decline',


        // Community
        'communityQuizzes': 'Community Quizzes',
        'noQuizzesYet': 'No community quizzes yet. Why not create one?',
        'createQuiz': 'Create a New Quiz',
        'quizTitle': 'Quiz Title',
        'question': 'Question',
        'addQuestion': 'Add Question',
        'publishQuiz': 'Publish Quiz',
        'atLeast3Questions': 'You need at least 3 questions to publish a quiz.',
        'generatingAnswers': 'AI is generating answers...',
        'checkingContent': 'AI is checking content for appropriateness...',
        'quizPublished': 'Quiz published successfully!',
        'quizRejected': 'AI moderation failed: The content may be inappropriate. Please revise.',
        'createdBy': 'Created by',
        'playQuiz': 'Play Quiz',
        'backToCommunity': 'Back to Community',
        'toughQuiz': 'Tough quiz! Go back to the community hub to try another.',
        'correctExclamation': 'Correct!',
        'incorrectExclamation': 'Incorrect',
        'correctAnswerIs': 'The correct answer is:',
        'generateAiAnswers': '✨ Generate Answers with AI',


        // Minigames
        'selectAGame': 'Select a Minigame',
        'flashcardFrenzy': 'Flashcard Frenzy',
        'flashcardDesc': 'Match vocabulary against the clock.',
        'sentenceScramble': 'Sentence Scramble',
        'sentenceDesc': 'Unscramble words to form correct sentences.',
        'memoryMatch': 'Memory Match',
        'memoryDesc': 'Find matching pairs of cards.',
        'speedListen': 'Speed Listen',
        'speedListenDesc': 'Hear a word, click it fast!',
        'score': 'Score',
        'time': 'Time',
        'finalScore': 'Final Score',
        'playAgain': 'Play Again',
        'start': 'Start',
        'dragAndDrop': 'Drag the words to form a correct sentence.',
        'quitGame': 'Quit Game',
        'check': 'Check',
        'listenAndSelect': 'Listen and select the correct meaning:',
        'finished': 'Finished',
        
        // Onboarding
        'whatToLearn': 'What to learn?',
        'dailyGoal': 'Daily Goal',
        'commitMessage': 'Can you commit to 5 minutes a day?',
        'slowIsSmooth': 'Slow is smooth.',
        'smoothIsFast': 'Smooth is fast.',
    },
    he: {
        // General
        'appName': 'Sloth',
        'welcomeTo': 'ברוכים הבאים ל-',
        'tagline': 'הדרך האיטית והבטוחה ללמוד.',
        'or': 'או',
        'signInWithGoogle': 'התחבר עם גוגל',
        'alreadyHaveAccount': 'כבר יש לך חשבון?',
        'dontHaveAccount': 'אין לך חשבון?',
        'signIn': 'התחבר',
        'signUp': 'הירשם',
        'email': 'אימייל',
        'password': 'סיסמה',
        'welcomeBack': 'ברוך שובך!',
        'accountCreated': 'החשבון נוצר בהצלחה! ברוכים הבאים ל-Sloth.',
        'googleSignInSuccess': 'התחברת בהצלחה עם גוגל!',
        'profileUpdated': 'הפרופיל עודכן בהצלחה!',
        'error': 'שגיאה',
        'loading': 'טוען...',
        'send': 'שלח',
        'saveChanges': 'שמור שינויים',
        'signOut': 'התנתק',
        'deleteAccount': 'מחק חשבון',
        'confirmDelete': 'האם אתה בטוח שברצונך למחוק את החשבון? פעולה זו אינה הפיכה.',
        'cancel': 'ביטול',
        'confirm': 'אישור',
        'accountDeleted': 'החשבון שלך נמחק בהצלחה.',
        'allCorrect': 'מעולה! כל התשובות נכונות.',
        'tryAgain': 'נסה שוב',
        'results': 'תוצאות',
        'notQuite': 'כמעט! בדוק את תשובותיך ונסה שוב.',
        'setupProfile': 'הגדר פרופיל',
        'selectLanguage': 'בחר שפת ממשק',
        'selectTheme': 'בחר ערכת נושא',
        'lightMode': 'מצב יום',
        'darkMode': 'מצב לילה',
        'next': 'הבא',
        'continue': 'המשך',
        'back': 'חזרה',

        // Home
        'goodMorning': 'בוקר טוב',
        'goodAfternoon': 'צהריים טובים',
        'goodEvening': 'ערב טוב',
        'readyToLearn': 'מוכן ללמוד היום?',
        'continueLearning': 'המשך ללמוד',
        'nextStep': 'הצעד הבא שלך הוא',
        'startLesson': 'התחל שיעור',
        'dailyStreak': 'רצף יומי',
        'daysInARow': 'ימים ברציפות! כל הכבוד!',
        'points': 'נקודות',
        'pointsEarned': 'נקודות שנצברו עד כה.',
        'chatWithSlappy': 'צ\'אט עם סלאפי!',
        'slappyEncouragement': 'הקמע הידידותי שלנו כאן כדי לעזור לך להתאמן.',
        'myFriends': 'החברים שלי',
        'connectAndChat': 'התחבר ושוחח עם חברים.',
        'communityHub': 'מרכז הקהילה',
        'createAndPlayQuizzes': 'צור ושחק במבחני קהילה.',
        'dailyQuests': 'משימות יומיות',
        'questCompleted': 'משימה הושלמה',
        'welcomePresentation': 'ברוכים הבאים לSloth',
        'allLessonsComplete': 'כל השיעורים הושלמו!',
        'legendMessage': 'אתה אגדה. חזור מאוחר יותר לתוכן נוסף.',
        'quickAccess': 'גישה מהירה',

        // Navigation
        'home': 'בית',
        'lessons': 'למידה',
        'aiPractice': 'אימון AI',
        'leaderboard': 'טבלת מובילים',
        'profile': 'פרופיל',
        'minigames': 'מיני-משחקים',
        'friends': 'חברים',
        'community': 'קהילה',
        'shop': 'חנות',
        'welcomeUser': 'ברוך הבא,',
        'teachingRequests': 'בקשות לשיעור',

        // Lessons & Learning Hub
        'spanishLessons': 'שיעורי ספרדית',
        'backToLessons': 'חזרה ללמידה',
        'vocabulary': 'אוצר מילים',
        'quiz': 'בחן',
        'submitQuiz': 'שלח בחן',
        'quizCompleted': 'הבחן הושלם! תוכל לחזור או לנסות שיעור אחר.',
        'youEarnedPoints': 'צברת',
        'onlineLearning': 'מורים חיים',
        'selfPacedLessons': 'הנתיב שלך',
        'learnFromPeers': 'התחבר עם מורה לשיעור וידאו 1-על-1.',
        'browseLessons': 'עקוב אחר הנתיב לשליטה בשפה.',
        'findATeacher': 'מצא מורה',
        'availableTeachers': 'מורים זמינים',
        'noTeachersAvailable': 'אין מורים זמינים כרגע. נסה שוב מאוחר יותר!',
        'startCall': 'התחל שיחה',
        'endCall': 'סיים שיחה',
        'incomingCallFrom': 'שיחה נכנסת מ-',
        'waitingForTeacher': 'מתחבר... ממתין למורה שיצטרף.',
        'callEnded': 'השיחה הסתיימה',
        'mute': 'השתק',
        'unmute': 'בטל השתקה',
        'videoOn': 'הפעל וידאו',
        'videoOff': 'כבה וידאו',
        'teachingRequestsDescription': 'הנה רשימה של תלמידים שממתינים להתחבר איתך.',
        'noTeachingRequests': 'אף אחד לא מתקשר כרגע. כל הכבוד על העבודה!',
        'acceptCall': 'קבל שיחה',
        'refresh': 'רענן',
        'learning': 'לומד',
        'hub': 'מרכז',
        'choosePath': 'בחר את הדרך שלך לשליטה בשפה.',
        'backToHub': 'חזרה למרכז הלמידה',
        'online': 'מחובר',
        'unit': 'יחידה',
        'outOfLives': 'נגמרו החיים!',
        'dontWorry': 'אל דאגה, תרגול מביא לשלמות. נסה שוב.',

        // AI Chat
        'aiPracticeChat': 'צ\'אט אימון עם AI',
        'typeYourMessage': 'הקלד את הודעתך...',
        'aiInitialMessage': '¡Hola! אני סלאפי (Slothy). שאל אותי כל דבר.',
        'oopsError': 'אופס! משהו השתבש. אנא נסה שוב.',
        'slappyIsThinking': 'סלאפי חושב...',
        'mascotDefault': 'רק זכור, לאט ובטוח מנצחים במירוץ!',
        'gotIt': 'הבנתי!',
        'clearChat': 'נקה צ\'אט',
        'confirmClearChat': 'האם אתה בטוח שברצונך למחוק את כל היסטוריית הצ\'אט? לא ניתן לשחזר פעולה זו.',
        'chatCleared': 'היסטוריית הצ\'אט נוקתה.',
        'scenarios': 'תרחישים',
        'pickScenario': 'בחר תרחיש משחק תפקידים',
        'listening': 'מקשיב...',
        'speaking': 'מדבר...',
        'thinking': 'חושב...',
        'autoVoiceActive': 'מצב דיבור אוטומטי פעיל',

        // Leaderboard
        'anonymousUser': 'משתמש אנונימי',

        // Profile
        'myProfile': 'הפרופיל שלי',
        'displayName': 'שם תצוגה',
        'yourRank': 'הדרגה שלך',
        'changeLanguage': 'שפת אפליקציה',
        'setYourRole': 'קבע את תפקידך',
        'teacher': 'מורה',
        'learner': 'תלמיד',
        'availability': 'זמינות',
        'availableForCalls': 'זמין/ה לשיחות',

        // Ranks
        'novato': 'טירון',
        'aprendiz': 'שוליה',
        'maestro': 'מאסטר',
        'leyenda': 'אגדה',

        // Shop
        'slothShop': 'חנות העצלן',
        'spendCoins': 'בזבז את המטבעות שהרווחת!',
        'buy': 'קנה',
        'equipped': 'מצוייד',
        'equip': 'צייד',
        'owned': 'בבעלות',
        'coins': 'מטבעות',

        // Friends
        'findFriends': 'מצא חברים',
        'searchUsers': 'חפש משתמשים...',
        'friendRequests': 'בקשות חברות',
        'noPendingRequests': 'אין בקשות ממתינות.',
        'myFriendsList': 'רשימת החברים שלי',
        'noFriendsYet': 'אין לך חברים עדיין. הוסף כמה!',
        'chatWith': 'צ\'אט עם',
        'voiceMessage': 'הודעה קולית',
        'startTyping': 'התחל להקליד כדי לשוחח...',
        'addFriend': 'הוסף חבר',
        'requestSent': 'הבקשה נשלחה',
        'requestReceived': 'בקשה התקבלה',
        'alreadyFriends': 'כבר חברים',
        'accept': 'אשר',
        'decline': 'דחה',

        // Community
        'communityQuizzes': 'בחני קהילה',
        'noQuizzesYet': 'אין עדיין בחני קהילה. למה שלא תיצור אחד?',
        'createQuiz': 'צור בחן חדש',
        'quizTitle': 'כותרת הבוחן',
        'question': 'שאלה',
        'addQuestion': 'הוסף שאלה',
        'publishQuiz': 'פרסם בחן',
        'atLeast3Questions': 'צריך לפחות 3 שאלות כדי לפרסם בחן.',
        'generatingAnswers': 'AI יוצר תשובות...',
        'checkingContent': 'AI בודק את התוכן להתאמה...',
        'quizPublished': 'הבחן פורסם בהצלחה!',
        'quizRejected': 'בדיקת ה-AI נכשלה: התוכן עלול להיות לא הולם. אנא שנה אותו.',
        'createdBy': 'נוצר על ידי',
        'playQuiz': 'שחק בבחן',
        'backToCommunity': 'חזרה לקהילה',
        'toughQuiz': 'חידון קשה! חזור לקהילה כדי לנסות אחר.',
        'correctExclamation': 'נכון!',
        'incorrectExclamation': 'לא נכון',
        'correctAnswerIs': 'התשובה הנכונה היא:',
        'generateAiAnswers': '✨ צור תשובות עם AI',

        // Minigames
        'selectAGame': 'בחר מיני-משחק',
        'flashcardFrenzy': 'שיגעון כרטיסיות',
        'flashcardDesc': 'התאם אוצר מילים נגד השעון.',
        'sentenceScramble': 'ערבול משפטים',
        'sentenceDesc': 'סדר את המילים ליצירת משפטים נכונים.',
        'memoryMatch': 'התאמת זיכרון',
        'memoryDesc': 'מצא זוגות תואמים של קלפים.',
        'speedListen': 'שמיעה מהירה',
        'speedListenDesc': 'שמע מילה, לחץ עליה מהר!',
        'score': 'ניקוד',
        'time': 'זמן',
        'finalScore': 'ניקוד סופי',
        'playAgain': 'שחק שוב',
        'start': 'התחל',
        'dragAndDrop': 'גרור את המילים כדי ליצור משפט נכון.',
        'quitGame': 'צא מהמשחק',
        'check': 'בדוק',
        'listenAndSelect': 'הקשב ובחר את המשמעות הנכונה:',
        'finished': 'סיום',

        // Onboarding
        'whatToLearn': 'מה תרצה ללמוד?',
        'dailyGoal': 'מטרה יומית',
        'commitMessage': 'האם תוכל להקדיש 5 דקות ביום?',
        'slowIsSmooth': 'לאט זה חלק.',
        'smoothIsFast': 'חלק זה מהיר.',
    },
};

interface LanguageContextType {
    language: string;
    setLanguage: (lang: string) => void;
    t: (key: string) => string;
    dir: 'ltr' | 'rtl';
}

const LanguageContext = createContext<LanguageContextType>({
    language: 'he', // Default to Hebrew
    setLanguage: (lang: string) => {},
    t: (key: string) => key,
    dir: 'rtl',
});

export const useTranslation = () => useContext(LanguageContext);

interface LanguageProviderProps {
    children: ReactNode;
}

export const LanguageProvider: FC<LanguageProviderProps> = ({ children }) => {
    const [language, setLanguage] = useState('he'); // Default to Hebrew
    
    const t = (key: string) => translations[language]?.[key] || key;
    const dir = language === 'he' ? 'rtl' : 'ltr';

    useEffect(() => {
        document.documentElement.lang = language;
        document.documentElement.dir = dir;
    }, [language, dir]);

    return React.createElement(LanguageContext.Provider, {
        value: { language, setLanguage, t, dir }
    }, children);
};
